define(["globals.js"],function(){function e(e){this.progress=0,this.timeout=e,this.paused=!0}return e.prototype={bulbRadius:10,graphicalLength:400,pickColor:function(e){this.progress<.7?e.fillStyle="green":.7<this.progress&&this.progress<.9?e.fillStyle="yellow":e.fillStyle="red"},draw:function(e,t){var n={x:t.x-this.bulbRadius,y:t.y},r={x:n.x+this.graphicalLength,y:n.y},i=this.bulbRadius,s=i*2,o=this.progress*this.graphicalLength,u=null,a=null,f=2*Math.PI;e.strokeStyle="white",e.beginPath(),e.moveTo(n.x,r.y),e.lineTo(r.x,r.y),e.stroke(),e.strokeStyle="black",this.pickColor(e),0<o&&o<s?(a=o-i,u=Math.acos(a/i),e.beginPath(),this.pickColor(e),e.moveTo(n.x+o,n.y),e.arc(n.x+i,n.y,i-e.lineWidth,u,-u,!1),e.fill()):s<o&&o<=this.graphicalLength&&(this.pickColor(e),e.strokeStyle=e.fillStyle,e.beginPath(),e.moveTo(n.x+s,n.y),e.arc(n.x+i,n.y,i-e.lineWidth,0,f,!1),e.fill(),e.beginPath(),e.moveTo(n.x+i,n.y),e.lineTo(n.x+o,n.y),e.stroke(),a=o-(this.graphicalLength-i),Math.abs(a)<=i&&(u=Math.acos(a/i),e.beginPath(),e.moveTo(n.x+o,r.y),e.arc(r.x-i,r.y,i-e.lineWidth,f-u,u,!0),e.fill())),e.fillStyle="black",e.strokeStyle="black",e.beginPath(),e.moveTo(n.x+s,n.y),e.arc(n.x+i,n.y,i,0,f,!1),e.moveTo(n.x+s,n.y-e.lineWidth),e.lineTo(r.x-s,r.y-e.lineWidth),e.moveTo(n.x+s,n.y+e.lineWidth),e.lineTo(r.x-s,r.y+e.lineWidth),e.moveTo(r.x,r.y),e.arc(r.x-i,r.y,i,0,f,!1),e.stroke()},bump:function(e){return this.paused?!1:(this.progress+=e/this.timeout,this.progress>1?(this.progress=1,!0):!1)},reset:function(){this.progress=0},setTimeout:function(e){this.timeout=e,this.reset()}},e});